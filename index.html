<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ¡ƒåœ’å¤©æ°£</title>
    <link rel="icon" type="image/png" href="./icon.png">
    <link rel="apple-touch-icon" href="./icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@700;900&display=swap"
        rel="stylesheet">


    <style>
        /* === è¯éº—é‘½çŸ³é…è‰²ï¼šæ·±é»‘ã€å¥¢è¯é‡‘ã€é–ƒè€€éŠ€ã€å¯¶çŸ³è— === */
        :root {
            --db-black: #101010; /* å¥¢è¯æ·±é»‘ (ä¸»èƒŒæ™¯/æ–‡å­—) */
            --db-white: #FFFFFF; /* ç°¡ç´„ç™½/éŠ€ (å¡ç‰‡èƒŒæ™¯) */
            --db-gold: #FFD700; /* å°Šè²´é‡‘ (é»ç¶´è‰²/å…‰èŠ’) */
            --db-silver: #A0A0A0; /* é–ƒè€€éŠ€ (è¼”åŠ©è‰²) */
            --db-blue: #3A69A0; /* å¯¶çŸ³è— (è¼”åŠ©è‰²) */
            --db-shadow: rgba(255, 255, 255, 0.15); /* ç™½è‰²é™°å½±ï¼Œæ¨¡æ“¬ç™¼å…‰ */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            /* å­—é«”èª¿æ•´ï¼šå…§æ–‡ç”¨ Noto Sans TCï¼Œæ¨™é¡Œç”¨ Montserrat (æˆ–ä¿æŒ Noto Sans TC) */
            font-family: 'Noto Sans TC', 'Montserrat', sans-serif;
            background-color: var(--db-black); /* ä¸»èƒŒæ™¯è‰² */
            /* èƒŒæ™¯ç´‹ç†ï¼šè±å½¢åˆ‡å‰²çš„é‘½çŸ³ç´‹ç† */
            background-image:
                linear-gradient(45deg, var(--db-silver) 1px, transparent 1px),
                linear-gradient(135deg, var(--db-silver) 1px, transparent 1px);
            background-size: 40px 40px;
            background-position: 0 0, 10px 0; /* èª¿æ•´è®“è±å½¢æ›´æ˜é¡¯ */
            min-height: 100vh;
            color: var(--db-white); /* ä¸»æ–‡å­—è‰² */
            overflow-x: hidden;
            padding-bottom: 30px;
        }

        /* é ‚éƒ¨ç‹€æ…‹åˆ— - é‘½çŸ³é‚Šç·£ */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            /* é»‘è‰²åŠé€æ˜ï¼Œå¢åŠ å¥¢è¯æ„Ÿ */
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            position: sticky;
            top: 0;
            z-index: 100;
            /* é‚Šæ¡†ä½¿ç”¨é‡‘è‰²/éŠ€è‰²æ¼¸è®Š */
            border-bottom: 2px solid var(--db-gold);
            box-shadow: 0 2px 10px var(--db-gold);
        }

        .location-pill {
            /* åœ°é»æ”¹æˆé‘½çŸ³å¾½ç«  */
            background: var(--db-gold);
            color: var(--db-black);
            padding: 5px 15px;
            /* è®“é‚Šç·£æ›´éŠ³åˆ© */
            border-radius: 5px;
            font-weight: 900;
            font-size: 1.1rem;
            letter-spacing: 2px;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
            text-transform: uppercase;
        }

        .update-pill {
            font-size: 0.8rem;
            color: var(--db-gold);
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: bold;
            border: 1px solid var(--db-silver);
        }

        .container {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* === æ ¸å¿ƒï¼šä»Šæ—¥ç„¦é»å¡ç‰‡ - DIAMOND BLING === */
        .hero-card {
            background: var(--db-white); /* å¡ç‰‡èƒŒæ™¯è®Šç‚ºç´”ç™½ */
            border-radius: 10px; /* é‚Šç·£æ›´éŠ³åˆ© */
            padding: 30px 25px;
            text-align: center;
            /* å¼·çƒˆçš„ç™½è‰²ç™¼å…‰é™°å½± */
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.5); 
            margin-bottom: 25px;
            position: relative;
            color: var(--db-black); /* å¡ç‰‡å…§æ–‡å­—è®Šç‚ºé»‘è‰² */
            border: 2px solid var(--db-silver);
        }

        /* æ™‚é–“æ¨™ç±¤æ”¹æˆé‡‘è‰² */
        .hero-period {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--db-gold);
            color: var(--db-black);
            padding: 6px 20px;
            border-radius: 5px;
            font-weight: 900;
            font-size: 1.1rem;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.3);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .hero-temp-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 15px 0 10px 0;
        }

        .hero-icon {
            font-size: 6.5rem; 
            /* è®“åœ–ç¤ºçœ‹èµ·ä¾†æ›´é–ƒè€€ */
            filter: drop-shadow(0 0 15px var(--db-gold));
            animation: pulse 3s infinite ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); filter: drop-shadow(0 0 15px var(--db-gold)); }
            50% { transform: scale(1.05); filter: drop-shadow(0 0 25px var(--db-gold)); }
            100% { transform: scale(1); filter: drop-shadow(0 0 15px var(--db-gold)); }
        }

        .hero-temp {
            font-size: 5.5rem; 
            font-weight: 900;
            color: var(--db-blue); /* æº«åº¦ä¸»è‰²æ”¹ç‚ºå¯¶çŸ³è— */
            line-height: 1;
        }

        .hero-desc {
            font-size: 1.6rem;
            color: var(--db-black);
            margin-bottom: 15px;
            font-weight: 900;
        }

        /* === é‘½çŸ³ Slogan å€å¡Š (è¯éº—æç¤º) === */
        .travel-quote {
            /* é‚Šæ¡†ä½¿ç”¨é‘½çŸ³è— */
            background: var(--db-black);
            color: var(--db-white);
            padding: 15px;
            border-radius: 10px;
            margin-top: 25px;
            font-style: italic;
            font-weight: 700;
            font-size: 1rem;
            border: 2px solid var(--db-blue);
            box-shadow: 0 0 15px var(--db-blue); /* å¯¶çŸ³è—ç™¼å…‰ */
            text-shadow: 0 0 5px var(--db-white);
        }


        /* === å¥¢è¯æç¤ºï¼šå»ºè­°å€ === */
        .advice-title {
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--db-gold); /* æ¨™é¡Œç”¨é‡‘è‰² */
            margin-bottom: 10px;
            padding-top: 15px;
            border-top: 2px dashed var(--db-gold);
        }

        .advice-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .advice-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            /* å»ºè­°å¡ç‰‡ä½¿ç”¨æ·±é»‘èƒŒæ™¯ï¼Œæ–‡å­—ç”¨ç™½/é‡‘ */
            background: #202020;
            padding: 15px 10px;
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
            transition: transform 0.2s;
            border: 1px solid var(--db-silver);
        }
        
        .advice-item:active {
            transform: scale(0.95);
        }

        .advice-icon {
            font-size: 2.5rem;
            margin-bottom: 5px;
            filter: drop-shadow(0 0 5px var(--db-gold));
        }

        .advice-text {
            font-size: 1.1rem;
            font-weight: 900;
            color: var(--db-gold); /* å»ºè­°æ–‡å­—ç”¨é‡‘è‰² */
            margin: 5px 0;
            line-height: 1.3;
            text-align: center;
            text-shadow: 0 0 3px var(--db-black);
        }
        
        .advice-detail {
            font-size: 0.7rem; 
            color: var(--db-silver); /* æç¤ºå­—ç”¨éŠ€è‰² */
            margin-top: 5px;
            font-weight: 700;
        }

        /* === ç¨å¾Œé å ±ï¼šæ©«å‘æ»‘å‹•å€ === */
        .section-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.3rem;
            color: var(--db-gold); /* æ¨™é¡Œæ”¹é‡‘è‰² */
            margin-bottom: 15px;
            margin-left: 10px;
            font-weight: 900;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7); /* é‡‘è‰²ç™¼å…‰ */
        }

        .scroll-container {
            display: flex;
            overflow-x: auto;
            gap: 15px;
            padding-bottom: 10px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .scroll-container::-webkit-scrollbar {
            display: none;
        }

        .mini-card {
            min-width: 130px;
            background: var(--db-black); /* é å ±å¡ç‰‡ä½¿ç”¨é»‘è‰² */
            border-radius: 15px;
            padding: 15px 10px;
            text-align: center;
            flex-shrink: 0;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1); /* æŸ”å’Œé‚Šæ¡†å…‰ */
            transition: all 0.2s;
            color: var(--db-white);
            border: 1px solid var(--db-silver);
        }
        
        .mini-card:hover {
             box-shadow: 0 0 25px var(--db-blue); /* hover æ™‚å¯¶çŸ³è—ç™¼å…‰ */
        }

        .mini-time {
            /* é å ±æ™‚é–“æ¨™ç±¤ä½¿ç”¨å¯¶çŸ³è—è‰² */
            background: var(--db-blue);
            color: white;
            padding: 3px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            display: inline-block;
            margin-bottom: 10px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .mini-icon {
            font-size: 2.2rem;
            margin: 5px 0;
        }

        .mini-temp {
            font-size: 1.1rem;
            font-weight: 900;
            color: var(--db-gold); /* é å ±æº«åº¦ç”¨é‡‘è‰² */
        }
    </style>
</head>

<body>
    
    <div class="status-bar">
        <div class="location-pill">ğŸ’ æ¡ƒåœ’ </div>
        <div id="updateTime" class="update-pill">æ›´æ–°ä¸­...</div>
    </div>

    <div class="container" id="mainContent" style="display: none;">
        <div id="heroCard">
        </div>

        <h3 class="section-title">TODAY'S DIAMOND CUT</h3>
        <div class="scroll-container" id="futureForecasts">
        </div>

    </div>

    <script>
        const API_URL = "https://weather-northern.zeabur.app/api/weather/kaohsiung"; 
        
        // é‘½çŸ³è¯éº—é¢¨æ ¼çš„ Slogan æ¸…å–® (è‡ªä¿¡ã€å°Šè²´ã€æ™‚å°šã€éŠ³åˆ©)
        const diamondBlingQuotes = [
            "ğŸ’ å¦³çš„å…‰èŠ’ï¼Œé€£å¤ªé™½ä¹Ÿç„¡æ³•é˜»æ“‹ã€‚",
            "ğŸ‘‘ æ°£å ´å…¨é–‹ï¼Œè®“å£å¤©æ°£ç‚ºå¦³è®“è·¯ã€‚",
            "âœ¨ å¥¢è¯ï¼Œå°±æ˜¯å°‡å¹³å‡¡çš„æ¯ä¸€å¤©éå¾—é–ƒé–ƒç™¼å…‰ã€‚",
            "ğŸ¥‚ å³ä½¿ä¸‹é›¨ï¼Œä¹Ÿè¦åƒé¦™æª³ä¸€æ¨£å†’è‘—æ³¡æ³¡ã€‚",
            "ğŸ“¸ å¦³å°±æ˜¯ç„¦é»ï¼Œè«‹ä»¥æœ€å®Œç¾çš„å§¿æ…‹é¢å°ã€‚",
            "ğŸ–¤ è¶Šæ˜¯ä½èª¿ï¼Œè¶Šé¡¯å¾—é›£ä»¥å¿½è¦–ã€‚",
            "ğŸš€ ä¿æŒéŠ³åˆ©ï¼Œéš¨æ™‚æº–å‚™å¥½é©šè‰·ä¸–ç•Œã€‚",
            "ğŸ’– ç©¿ä¸Šå¦³çš„æˆ°è¢ï¼Œä»Šå¤©æ²’æœ‰ä»€éº¼èƒ½æ“Šæ•—å¦³ã€‚",
            "ğŸŒŸ æ¯å€‹æ™‚åˆ»éƒ½æ˜¯å¦³çš„èˆå°ï¼Œç›¡æƒ…é–ƒè€€å§ã€‚"
        ];
        
        // æ ¹æ“šæ—¥æœŸæ±ºå®š Slogan
        function getDailyQuote() {
            const today = new Date().getDate(); // å–å¾—ä»Šå¤©çš„æ—¥æœŸæ•¸å­—
            return diamondBlingQuotes[today % diamondBlingQuotes.length];
        }

        function getWeatherIcon(weather) {
            // æ›¿æ›éƒ¨åˆ†åœ–æ¨™ï¼Œä½¿å…¶çœ‹èµ·ä¾†æ›´å…·è¯éº—æ„Ÿ
            if (!weather) return "âœ¨";
            if (weather.includes("æ™´")) return "â˜€ï¸";
            if (weather.includes("å¤šé›²")) return "â˜ï¸"; 
            if (weather.includes("é™°")) return "âš«"; // é»‘è‰²åœ“é»ï¼Œæ¥µç°¡
            if (weather.includes("é›¨") && weather.includes("é›·")) return "âš¡"; 
            if (weather.includes("é›¨")) return "ğŸ’§"; // æ°´æ»´ç¬¦è™Ÿï¼Œç°¡æ½”
            if (weather.includes("éœ§")) return "ğŸŒ¬ï¸"; 
            return "ğŸ’"; // é»˜èªçµ¦å€‹é‘½çŸ³
        }

        /* é‘½çŸ³è¯éº—é¢¨çš„ç©¿æ­å»ºè­°ï¼Œå¼·èª¿è³ªæ„Ÿèˆ‡æ°£å ´ */
        function getAdvice(rainProb, maxTemp) {
            let rainIcon = "ğŸ’–";
            let rainText = "è‡ªå¸¶æ°£å ´";
            
            if (parseInt(rainProb) > 30 && parseInt(rainProb) <= 60) {
                 rainIcon = "ğŸ’¼";
                 rainText = "ç²¾å“é…ä»¶æ“‹é›¨";
            } else if (parseInt(rainProb) > 60) {
                rainIcon = "ğŸš˜";
                rainText = "è±ªè¯åº§é§•æ¥é€"; // è¯éº—é¢¨çš„èº²é›¨æ–¹å¼
            }

            let clothIcon = "ğŸ‘‘";
            let clothText = "å¥³ç‹æ°£å‹¢ç™»å ´";
            
            if (parseInt(maxTemp) >= 27) {
                 clothIcon = "ğŸ‘š";
                 clothText = "çµ²ç¶¢æˆ–ç·é¢";
            } else if (parseInt(maxTemp) <= 20 && parseInt(maxTemp) > 15) {
                clothIcon = "ğŸ§¥";
                clothText = "é«˜é ˜ç¾Šçµ¨å¤–å¥—";
            } else if (parseInt(maxTemp) <= 15) {
                clothIcon = "ğŸ§£";
                clothText = "çš®è‰æˆ–è²‚çµ¨";
            }

            return { rainIcon, rainText, clothIcon, clothText };
        }

        function getTimePeriod(startTime) {
            const hour = new Date(startTime).getHours();
            if (hour >= 5 && hour < 11) return "GOLDEN HOUR";
            if (hour >= 11 && hour < 14) return "DIAMOND SPARKLE";
            if (hour >= 14 && hour < 18) return "AFTERNOON LUXE";
            if (hour >= 18 && hour < 23) return "NIGHT BLING";
            return "MIDNIGHT VEIL";
        }

        function renderWeather(data) {
            const forecasts = data.forecasts;
            const current = forecasts[0];
            const others = forecasts.slice(1);

            // 1. æ¸²æŸ“ Hero Card (ä¸»ç•«é¢)
            const advice = getAdvice(current.rain, current.maxTemp);
            const period = getTimePeriod(current.startTime);
            const avgTemp = Math.round((parseInt(current.maxTemp) + parseInt(current.minTemp)) / 2);

            document.getElementById('heroCard').innerHTML = `
                <div class="hero-card">
                    <div class="hero-period">${period}</div>
                    <div class="hero-temp-container">
                        <div class="hero-icon">${getWeatherIcon(current.weather)}</div>
                        <div class="hero-temp">${avgTemp}Â°</div>
                    </div>
                    <div class="hero-desc">${current.weather}</div>
                    
                    <div class="advice-title">LUXURY TIPS</div>
                    <div class="advice-grid">
                        <div class="advice-item">
                            <div class="advice-icon">${advice.rainIcon}</div>
                            <div class="advice-text">${advice.rainText}</div>
                            <div class="advice-detail">P.O.P ${current.rain}</div>
                        </div>
                        <div class="advice-item">
                            <div class="advice-icon">${advice.clothIcon}</div>
                            <div class="advice-text">${advice.clothText}</div>
                            <div class="advice-detail">AVG ${avgTemp}Â°C</div>
                        </div>
                    </div>
                    
                    <div class="travel-quote">
                        ${getDailyQuote()}
                    </div>
                </div>
            `;

            // 2. æ¸²æŸ“ç¨å¾Œé å ± (åŒ…å«ä»Šå¤©ã€æ˜å¤©ã€å¾Œå¤©åˆ¤æ–·)
            const scrollContainer = document.getElementById('futureForecasts');
            scrollContainer.innerHTML = '';

            const today = new Date();
            const todayDate = today.getDate();
            
            // è¨ˆç®—æ˜å¤©çš„æ—¥æœŸ
            const tomorrow = new Date(today);
            tomorrow.setDate(today.getDate() + 1);
            const tomorrowDate = tomorrow.getDate();
            
            // è¨ˆç®—å¾Œå¤©çš„æ—¥æœŸ
            const dayAfterTomorrow = new Date(today);
            dayAfterTomorrow.setDate(today.getDate() + 2);
            const dayAfterTomorrowDate = dayAfterTomorrow.getDate();

            others.forEach(f => {
                const fDateObj = new Date(f.startTime);
                const fDate = fDateObj.getDate();
                let p = getTimePeriod(f.startTime);
                
                // åˆ¤æ–·æ—¥æœŸ
                if (fDate === todayDate) {
                    // ä»Šå¤©å¾ŒçºŒæ™‚æ®µï¼Œé¡¯ç¤ºæ™‚æ®µå
                    // p = p; // ä¿æŒåŸæ¨£
                } else if (fDate === tomorrowDate) {
                    // æ˜å¤©
                    p = "TOMORROW " + getTimePeriod(f.startTime);
                } else if (fDate === dayAfterTomorrowDate) {
                    // å¾Œå¤©
                    p = "THE DAY AFTER " + getTimePeriod(f.startTime);
                } else {
                    // å†ä¹‹å¾Œçš„æ—¥æœŸï¼Œé¡¯ç¤ºæ—¥æœŸ
                    const month = fDateObj.getMonth() + 1;
                    const date = fDate;
                    p = `${month}/${date} ${getTimePeriod(f.startTime)}`;
                }

                scrollContainer.innerHTML += `
                    <div class="mini-card">
                        <div class="mini-time">${p}</div>
                        <div class="mini-icon">${getWeatherIcon(f.weather)}</div>
                        <div class="mini-temp">${f.minTemp}Â° - ${f.maxTemp}Â°</div>
                        <div style="font-size:0.8rem; color:var(--db-silver); margin-top:5px;">ğŸ’§P.O.P ${f.rain}</div>
                    </div>
                `;
            });

            // 3. å³ä¸Šè§’é¡¯ç¤ºä»Šæ—¥æ—¥æœŸ
            const now = new Date();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            const dayIndex = now.getDay();
            const days = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"];

            document.getElementById('updateTime').textContent = `${month}/${date} ${days[dayIndex]}`;
        }

        async function fetchWeather() {
            try {
                // ç›´æ¥ç™¼èµ· API è«‹æ±‚ä¸¦ç­‰å¾…çµæœ
                const response = await fetch(API_URL);
                const json = await response.json();


                if (json.success) {
                    renderWeather(json.data);

                    // è³‡æ–™è™•ç†å¥½å¾Œï¼Œé¡¯ç¤ºä¸»ç•«é¢
                    document.getElementById('mainContent').style.display = 'block';
                } else {
                    throw new Error("API Error");
                }
            } catch (e) {
                console.error(e);
                // ç”±æ–¼æ²’æœ‰è¼‰å…¥ç•«é¢é®æ“‹ï¼ŒéŒ¯èª¤è¨Šæ¯å°‡ç›´æ¥å½ˆå‡º
                alert("å¤©æ°£è³‡æ–™è®€å–å¤±æ•—ï¼Œåœ°åœ–éºå¤±äº†ï¼è«‹æª¢æŸ¥ç¶²è·¯å¾Œå†è©¦ä¸€æ¬¡ã€‚");
            }
        }

        document.addEventListener("DOMContentLoaded", fetchWeather);
    </script>
</body>

</html>
